# mpc
receding: 10
step_time: 0.1
ref_speed: 4
device: 'cpu'
time_print: True
collision_threshold: 0.1

# robot
robot:
  kinematics: 'diff'
  max_speed: [8, 3]
  max_acce: [8, 3]
  length: 1.6
  width: 2.0

# initial path
ipath:
  # interval: 0.4
  waypoints: [[23, 30, -1.57], [41, 28, -1], [30, 38, 2], [10, 19, -2], [29, 18, 3]]
  curve_style: 'line'   # 'dubins' or reeds or line
  min_radius: 4.0
  loop: False
  arrive_threshold: 0.1
  close_threshold: 0.1
  ind_range: 10
  arrive_index_threshold: 1
  
# proximal alternating minimization network
pan:
  iter_num: 2
  dune_max_num: 100
  nrmp_max_num: 15  # 12 points (10 key directions + 2 nearest) + margin
  dune_checkpoint: 'example/model/diff_robot_default/model_5000.pth'
  iter_threshold: 0.1

  # Directional sampling configuration
  directional_sampling:
    enabled: true  # Enable directional sampling
    key_directions:
      - center_index: 25    # -45 degree direction
        window_size: 5      # 5 points around center (indices 24, 25, 26, 27, 28)
      - center_index: 75    # +45 degree direction
        window_size: 5      # 5 points around center (indices 74, 75, 76, 77, 78)
    nearest_num: 5          # 2 nearest points for precise obstacle avoidance


# adjust parameters
adjust:
  q_s: 0.4
  p_u: 0.4
  eta: 15.0
  d_max: 1.0
  d_min: 0.1

  
roi:
  enabled: true
  strategy_order: [ellipse, tube, wedge]
  wedge: { fov_deg: 60.0, r_max_m: 8.0 }
  ellipse: { safety_scale: 1.08 }
  tube: { r0_m: 0.5, kappa_gain: 0.4, v_tau_m: 0.3 }
  guardrail: { n_min: 10, n_max: 500, relax_step: 1.15, tighten_step: 0.9 }
  always_keep: { near_radius_m: 1.5, goal_radius_m: 1.5 }

  

