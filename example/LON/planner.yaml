# mpc
receding: 10
step_time: 0.1
ref_speed: 4
device: 'cpu'
time_print: False
collision_threshold: 0.01

# robot
robot:
  kinematics: 'diff'
  max_speed: [8, 1]
  max_acce: [8, 3]
  length: 1.6
  width: 2.0

# initial path
ipath:
  waypoints: [[0, 20, 0], [75, 20, 0]]
  curve_style: 'dubins'   # 'dubins' or reeds or line
  min_radius: 3.0
  loop: False
  arrive_threshold: 0.1
  close_threshold: 0.1
  ind_range: 10
  arrive_index_threshold: 1
  
# proximal alternating minimization network
pan:
  iter_num: 2
  dune_max_num: 100
  nrmp_max_num: 10
  iter_threshold: 0.5
  dune_checkpoint: 'example/model/diff_robot_default/model_5000.pth'

# adjust parameters
adjust:
  q_s: 0.1
  p_u: 2.0
  eta: 10
  d_max: 0.2
  d_min: 0.01
  ro_obs: 10
  bk: 0.0

# ROI (Region of Interest) / Neural Focusing configuration
# Filters obstacle points to relevant corridor before DUNE/Flexible PDHG
# Inspired by Neural Informed RRT* (ICRA 2024)
roi:
  # Master switch: set to true to enable ROI filtering, false to disable (default: false)
  enabled: false

  # Strategy priority order: tries strategies in order until one succeeds
  # Options: 'ellipse' (Informed RRT* corridor), 'tube' (path dilation), 'wedge' (forward fan)
  strategy_order: [ellipse, tube, wedge]

  # Wedge strategy: forward fan-shaped region (used for cold start or when no path available)
  wedge:
    fov_deg: 60.0      # Field of view angle in degrees (default: 60)
    r_max_m: 8.0       # Maximum range in meters (default: 8.0)

  # Ellipse strategy: Informed RRT* style elliptical corridor (used for straight/gentle paths)
  ellipse:
    safety_scale: 1.08  # Safety margin multiplier for ellipse axes (default: 1.08)

  # Tube strategy: morphological dilation around reference path (used for curved paths)
  tube:
    r0_m: 0.5          # Base radius in meters (default: 0.5)
    kappa_gain: 0.4    # Curvature-dependent radius gain (default: 0.4)
    v_tau_m: 0.3       # Velocity-dependent radius gain in meters (default: 0.3)

  # Guardrail: adaptive relaxation/tightening based on filtered point count
  guardrail:
    n_min: 30          # Minimum points required (relax if below, default: 30)
    n_max: 500         # Maximum points allowed (downsample if above, default: 500)
    relax_step: 1.15   # Relaxation multiplier when n < n_min (default: 1.15)
    tighten_step: 0.9  # Tightening multiplier when n > n_max (default: 0.9)

  # Always keep: safety retention set (always preserved regardless of ROI strategy)
  always_keep:
    near_radius_m: 1.5  # Always keep points within this radius of robot (default: 1.5)
    goal_radius_m: 1.5  # Always keep points within this radius of goal (default: 1.5)








