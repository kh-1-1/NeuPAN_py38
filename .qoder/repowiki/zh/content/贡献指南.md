# 贡献指南

<cite>
**本文档中引用的文件**  
- [README.md](file://README.md)
- [pyproject.toml](file://pyproject.toml)
- [neupan/neupan.py](file://neupan/neupan.py)
- [neupan/robot/robot.py](file://neupan/robot/robot.py)
- [neupan/blocks/initial_path.py](file://neupan/blocks/initial_path.py)
- [neupan/blocks/dune_train.py](file://neupan/blocks/dune_train.py)
- [example/run_exp.py](file://example/run_exp.py)
- [example/pf/acker/planner.yaml](file://example/pf/acker/planner.yaml)
- [example/polygon_robot/diff/env.yaml](file://example/polygon_robot/diff/env.yaml)
</cite>

## 目录
1. [简介](#简介)
2. [提交Bug报告](#提交bug报告)
3. [新功能开发流程](#新功能开发流程)
4. [代码风格与测试要求](#代码风格与测试要求)
5. [欢迎贡献方向](#欢迎贡献方向)
6. [维护者联系方式](#维护者联系方式)

## 简介
NeuPAN 是一个端到端、实时、无需地图且易于部署的基于模型学习的机器人运动规划器。通过融合学习与优化技术，NeuPAN 能够直接将障碍物点云数据映射为控制动作，实现在复杂未知环境中的高效安全导航。本贡献指南旨在为社区成员提供清晰的参与路径，确保代码质量和项目持续发展。

## 提交Bug报告
为便于快速定位和修复问题，请在提交Bug报告时遵循以下标准格式：

**环境信息**
- 操作系统版本（如：Windows 11, Ubuntu 20.04）
- Python 版本（如：Python 3.10.12）
- 依赖库版本（可通过 `pip list` 获取）
- 是否使用 ROS 封装（neupan_ros）

**复现步骤**
1. 描述触发Bug的具体操作流程
2. 提供使用的配置文件（env.yaml 和 planner.yaml）关键内容
3. 说明运行命令（如：`python run_exp.py -e polygon_robot -d diff`）

**日志输出**
- 完整的错误堆栈信息
- 相关的控制台输出日志
- 若有可视化界面，请附上截图或录屏

请将上述信息整理后在 GitHub Issues 中提交，标题格式建议为：[Bug] 问题简述。

**Section sources**
- [README.md](file://README.md#L0-L242)
- [example/run_exp.py](file://example/run_exp.py#L76-L92)

## 新功能开发流程
新功能的开发遵循从讨论到合并的完整周期，确保设计合理性和代码质量。

**1. 创建Issue讨论设计**
在实现任何新功能前，请先创建一个Issue，详细描述：
- 功能目标与应用场景
- 设计方案与技术路线
- 预期的API变更
- 可能的影响范围

维护者和其他贡献者将在Issue中进行讨论，达成共识后方可进入实现阶段。

**2. 分支开发**
- 从 `main` 分支创建新特性分支：`git checkout -b feature/your-feature-name`
- 在分支上进行代码实现和测试

**3. 提交Pull Request**
- 完成功能开发并通过本地测试后，提交PR
- PR描述中需包含：
  - 功能说明
  - 与Issue的关联（如：Closes #123）
  - 测试方法与结果
  - 任何已知限制或后续工作

**4. 代码审查与合并**
- 维护者将对PR进行审查，可能提出修改建议
- 根据反馈完善代码
- 通过所有CI检查后，PR将被合并到主分支

**Section sources**
- [README.md](file://README.md#L0-L242)
- [neupan/neupan.py](file://neupan/neupan.py#L286)

## 代码风格与测试要求
为确保代码质量和一致性，所有贡献必须满足以下要求：

**代码风格**
- 遵循 PEP 8 编码规范
- 使用 Google 风格的文档字符串
- 变量命名采用小写字母加下划线（snake_case）
- 类名采用驼峰命名法（CamelCase）

**测试要求**
- 新增功能必须包含单元测试
- 修改现有功能时需确保原有测试通过
- 性能关键代码应提供性能测试基准
- 所有代码必须通过CI流水线的静态检查和测试

**配置文件规范**
- YAML配置文件需保持清晰的结构和注释
- 新增参数需在文档中说明其用途和默认值
- 避免硬编码，通过配置文件提供可调参数

**Section sources**
- [pyproject.toml](file://pyproject.toml#L0-L34)
- [neupan/robot/robot.py](file://neupan/robot/robot.py#L140-L195)
- [example/pf/acker/planner.yaml](file://example/pf/acker/planner.yaml#L0-L39)

## 欢迎贡献方向
我们特别欢迎以下方向的贡献：

**1. 新机器人运动学支持**
目前NeuPAN主要支持差速驱动（diff）和阿克曼转向（acker）机器人。欢迎贡献对其他运动学模型的支持，如全向轮（omni）、履带式等。实现方式通常需要修改NRMP层中的运动学约束。

**2. 性能优化**
- 提升MPC求解效率
- 优化DUNE模型推理速度
- 减少内存占用
- 改进算法收敛性

**3. 文档完善**
- 补充API文档
- 增加使用示例
- 改进教程和指南
- 翻译多语言文档

**4. 新功能扩展**
- 支持更多传感器类型集成
- 增强动态障碍物处理能力
- 改进路径规划算法
- 添加新的评估指标

**Section sources**
- [README.md](file://README.md#L0-L242)
- [example/polygon_robot/diff/env.yaml](file://example/polygon_robot/diff/env.yaml#L0-L41)
- [neupan/blocks/initial_path.py](file://neupan/blocks/initial_path.py#L35-L75)

## 维护者联系方式
如有任何技术咨询或合作意向，欢迎通过以下方式联系项目维护者：

**主要联系人**
- 姓名：韩瑞华
- 邮箱：hanrh@connect.hku.hk

**沟通渠道**
- GitHub Issues：用于功能讨论和Bug报告
- 项目Wiki：获取最新开发动态和规划
- 电子邮件：用于深入的技术咨询和合作洽谈

我们期待您的贡献，共同推动NeuPAN项目的发展！

**Section sources**
- [README.md](file://README.md#L240-L242)